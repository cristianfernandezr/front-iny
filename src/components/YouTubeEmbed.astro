---
const { url, title = "Video destacado" } = Astro.props;


function getYouTubeId(url: string) {
  const match = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|shorts\/))([\w-]{11})/);
  return match ? match[1] : null;
}

const videoId = getYouTubeId(url);
---
<section id="featured-video" class="section">
  <div class="container-custom py-12">
    <div class="text-center max-w-2xl mx-auto mb-10">
      <span class="inline-block px-4 py-1 rounded-full bg-secondary-100 dark:bg-secondary-900 text-secondary-600 dark:text-secondary-300 font-medium text-sm mb-4">
        Video destacado
      </span>
      <h2 class="mb-6 text-gray-900 dark:text-white">{title}</h2>
      <p class="text-gray-600 dark:text-gray-300">
        Descubre más sobre nuestra plataforma viendo este video.
      </p>
    </div>
    <div class="flex justify-center">
      {videoId ? (
        <div class="aspect-w-16 aspect-h-9 w-full max-w-2xl rounded-xl shadow-lg overflow-hidden">
          <iframe
            src={`https://www.youtube.com/embed/${videoId}`}
            title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            class="w-full h-full border-none"
          ></iframe>
        </div>
      ) : (
        <div class="text-red-500 text-center">
          El enlace de YouTube no es válido.
        </div>
      )}
    </div>
  </div>
</section>

<style>
/* Si no usas Tailwind, pon esto en tu CSS global: */
.aspect-w-16.aspect-h-9 {
  aspect-ratio: 16 / 9;
}
</style>
